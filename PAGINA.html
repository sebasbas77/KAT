<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicación de Escaneo de Código</title>
</head>
<body>
    <input type="file" id="fileInput">
    <button onclick="processImage()">Procesar Imagen</button>
    <div id="result"></div>

    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.3.0/dist/tesseract.js"></script>
    <script>
        function processImage() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            const reader = new FileReader();

            reader.onload = function(event) {
                const img = new Image();
                img.onload = function() {
                    Tesseract.recognize(
                        img,
                        'eng', // idioma de reconocimiento, puedes cambiarlo según el idioma de los textos en la imagen
                        { logger: m => console.log(m) } // opción para mostrar información de depuración en la consola
                    ).then(result => {
                        const codigoUnico = extractUniqueCode(result.data.text);
                        showResult(codigoUnico);
                    }).catch(error => {
                        console.error('Error al procesar la imagen:', error);
                    });
                };
                img.src = event.target.result;
            };
            reader.readAsDataURL(file);
        }

        function extractUniqueCode(text) {
            // Aquí debes implementar la lógica para extraer el código único de 'text'
            // Por ejemplo, puedes buscar patrones que coincidan con el formato específico del código único
            // y filtrarlos adecuadamente
            // Este es solo un ejemplo de cómo podrías hacerlo, debes ajustarlo según tus necesidades específicas
            const regex = /X\d{7}/; // Expresión regular para buscar el formato 'X' seguido de 7 dígitos
            const match = text.match(regex);
            return match ? match[0] : 'No se encontró un código único';
        }

        function showResult(codigoUnico) {
            document.getElementById('result').innerText = `Código único: ${codigoUnico}`;
        }
    </script>
</body>
</html>
